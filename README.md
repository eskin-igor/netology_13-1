# netology_13-1

# Домашнее задание к занятию «Уязвимости и атаки на информационные системы»

## Задание 1

Скачайте и установите виртуальную машину Metasploitable: https://sourceforge.net/projects/metasploitable/.  
Это типовая ОС для экспериментов в области информационной безопасности, с которой следует начать при анализе уязвимостей.  
Просканируйте эту виртуальную машину, используя **nmap**.  
Попробуйте найти уязвимости, которым подвержена эта виртуальная машина.  
Сами уязвимости можно поискать на сайте [https://www.exploit-db.com/](https://www.exploit-db.com/).  
Для этого нужно в поиске ввести название сетевой службы, обнаруженной на атакуемой машине, и выбрать подходящие по версии уязвимости.  
Ответьте на следующие вопросы:
* Какие сетевые службы в ней разрешены?
* Какие уязвимости были вами обнаружены? (список со ссылками: достаточно трёх уязвимостей)

*Приведите ответ в свободной форме.*

## Решение 1

Запущена виртуальная машина metasploitable-linux-2.0.0.  
По умолчанию логин/пароль для доступа к виртуальной машине Metasploitable-Linux-2.0.0 — msfadmin/msfadmin.  
Как видим адрес виртуальной машины 192.168.1.100.

![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-01-01.JPG)
 
Определим, какие сетевые службы разрешены.  
Для этого проведём TCP SYN-сканирование.
```
sudo nmap -sS 192.168.1.100
```
![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-01-02.JPG)
Определим версии сетевых служб.
```
sudo nmap -sV 192.168.1.100
```
![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-01-03.JPG)

Теперь в соответствии с базой данных уязвимостей [https://www.exploit-db.com/](https://www.exploit-db.com/) можно определить наличие этих уязвимостей на виртуальной машине metasploitable-linux-2.0.0.  
Были обнаружены уязвимости:
* vsftpd 2.3.4 - Backdoor Command Execution, [https://www.exploit-db.com/exploits/49757](https://www.exploit-db.com/exploits/49757) 
* RPCBind / libtirpc - Denial of Service, [https://www.exploit-db.com/exploits/41974](https://www.exploit-db.com/exploits/41974) 
* MySQL 5.0.x - IF Query Handling Remote Denial of Service, [https://www.exploit-db.com/exploits/30020](https://www.exploit-db.com/exploits/30020)
* UnrealIRCd 3.2.8.1 - Remote Downloader/Execute, [https://www.exploit-db.com/exploits/13853](https://www.exploit-db.com/exploits/13853)

## Задание 2

Проведите сканирование Metasploitable в режимах SYN, FIN, Xmas, UDP.  
Запишите сеансы сканирования в Wireshark.  
Ответьте на следующие вопросы:
* Чем отличаются эти режимы сканирования с точки зрения сетевого трафика?
* Как отвечает сервер?
*Приведите ответ в свободной форме*.

## Решение 2

**SYN сканирование**  
Принцип работы:  
Cканер отправляет пакеты SYN (запрос на синхронизацию) на целевой порт и ожидает ответа.   
Если порт открыт, в ответ приходит пакет SYN-ACK, если закрыт — пакет RST (разрыв соединения, RST/ACK).  
Если ответ не получен, порт считается фильтрованным. 
```
sudo nmap -sS 192.168.1.100
```
![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-02-01.JPG) 

Для захвата сетевых пакетов использовалась утилита Tcpdump.  
Вывести список доступных системе сетевых интерфейсов, в которых tcpdump может захватывать пакеты:
```
sudo tcpdump –D
```
Захватить весь сетевой траффик на интерфейсе enp0s3 и записать его в файл capture.pcap:
```
sudo tcpdump -n -i enp0s3 -w capture.pcap
```
Анализ сетевого трафика с помощью утилиты Wireshark.

![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-02-02.JPG)
 
**FIN сканирование**  
Принцип работы:  
Cканер отправляет пакеты с флагом FIN (завершение соединения) на целевой порт и анализирует ответ.  
Если порт закрыт, хост отправляет ответ RST, если открыт - игнорирует пакет.  
Также если ответ не получен, порт считается открытым или фильтрованным. Это означает, что порт на каком-то участке сети или хоста заблокирован и Nmap не может определить, открыт он или закрыт.  
```
sudo nmap -sF 192.168.1.100
```
![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-02-03.JPG)

![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-02-04.JPG)

**Xmas сканирование**  
Принцип работы:  
В заголовке TCP устанавливаются флаги FIN, PSH и URG.  
Когда хост получает пакет Xmas-сканирования, он должен ответить RST, если порт закрыт, или отбросить пакет, если порт открыт.  
Также если ответ не получен, порт считается открытым или фильтрованным. Это означает, что порт на каком-то участке сети или хоста заблокирован и Nmap не может определить, открыт он или закрыт.
```
sudo nmap -sX 192.168.1.100
```
![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-02-05.JPG)

![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-02-06.JPG)

**UDP сканирование**  
Принцип работы:  
Сканер отправляет UDP-пакеты на целевой порт и ожидает ответа.  
Если порт открыт, хост отвечает пакетом подтверждения.
Если ответ не получен, порт считается открытым или фильтрованным. Это означает, что порт на каком-то участке сети или хоста заблокирован и Nmap не может определить, открыт он или закрыт.
Если возвращается пакет с ошибкой ICMP, порт считается закрытым. 
```
sudo nmap -sU 192.168.1.100
```
![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-02-07.JPG)

![](https://github.com/eskin-igor/netology_13-1/blob/main/13-1/13-01-02-08.JPG)
